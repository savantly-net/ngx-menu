{"version":3,"sources":["menu.service.ts"],"names":[],"mappings":"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","file":"menu.service.js","sourceRoot":"","sourcesContent":["import { IUser, SecurityService } from '@savantly/ngx-security';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs/Observable';\nimport'rxjs/add/observable/of';\n\nexport const /** @type {?} */ defaultMenuId = 'mainMenu';\n/**\n * @abstract\n */\nexport abstract class IMenu {\n  id: string;\n  text: string;\n  isPublic: boolean;\n  roles: string[];\n  items: IMenu[];\n  position: number;\n  disabled: boolean;\n  icon: string;\n  callback: (event: any) => void;\n  addMenuItem: (item: any) => IMenu;\n  removeMenuItem: (id: string) => boolean;\n  getMenuItem: (id: string) => IMenu;\n}\n\nfunction IMenu_tsickle_Closure_declarations() {\n/** @type {?} */\nIMenu.prototype.id;\n/** @type {?} */\nIMenu.prototype.text;\n/** @type {?} */\nIMenu.prototype.isPublic;\n/** @type {?} */\nIMenu.prototype.roles;\n/** @type {?} */\nIMenu.prototype.items;\n/** @type {?} */\nIMenu.prototype.position;\n/** @type {?} */\nIMenu.prototype.disabled;\n/** @type {?} */\nIMenu.prototype.icon;\n/** @type {?} */\nIMenu.prototype.callback;\n/** @type {?} */\nIMenu.prototype.addMenuItem;\n/** @type {?} */\nIMenu.prototype.removeMenuItem;\n/** @type {?} */\nIMenu.prototype.getMenuItem;\n}\n\nexport class Menu implements IMenu {\n  id: string;\n  text: string;\n  isPublic: boolean;\n  roles: string[];\n  items: IMenu[];\n  position: number;\n  callback: (event: any) => void;\n  disabled: boolean;\n  icon: string;\n/**\n * @param {?} item\n * @return {?}\n */\naddMenuItem(item: IMenu) {\n    if (this.items.findIndex(x => x.id === item.id) > -1) {\n      throw new Error('Item with this id: \"' + item.id + '\" already exists in menu: ' + this.id);\n    } else {\n      this.items.push(item);\n    }\n    const /** @type {?} */ index = this.items.findIndex(x => x.id === item.id);\n    return this.items[index];\n  }\n/**\n * @param {?} id\n * @return {?}\n */\nremoveMenuItem(id: string): boolean {\n    const /** @type {?} */ index = this.items.findIndex(x => x.id === id);\n    if (index === -1) {\n      throw new Error('Item with this id doesn\\'t exist' + id);\n    } else {\n      this.items.slice(index, 1);\n    }\n    return true;\n  }\n/**\n * @param {?} id\n * @return {?}\n */\ngetMenuItem(id: string): IMenu {\n    const /** @type {?} */ index = this.items.findIndex(x => x.id === id);\n    if (index === -1) {\n      throw new Error('Menu item was not found: ' + id);\n    } else {\n      return this.items[index];\n    }\n  }\n/**\n * @param {?} options\n */\nconstructor (options: any) {\n    this.id = options.id || defaultMenuId;\n    this.isPublic = options.isPublic || true;\n    this.items = options.items || [];\n    this.roles = options.roles || ['*'];\n    this.text = options.text || 'unamed menu item';\n    this.callback = options.callback;\n  }\n}\n\nfunction Menu_tsickle_Closure_declarations() {\n/** @type {?} */\nMenu.prototype.id;\n/** @type {?} */\nMenu.prototype.text;\n/** @type {?} */\nMenu.prototype.isPublic;\n/** @type {?} */\nMenu.prototype.roles;\n/** @type {?} */\nMenu.prototype.items;\n/** @type {?} */\nMenu.prototype.position;\n/** @type {?} */\nMenu.prototype.callback;\n/** @type {?} */\nMenu.prototype.disabled;\n/** @type {?} */\nMenu.prototype.icon;\n}\n\nexport class MenuService {\nprivate menus: Menu[];\n  user: IUser;\n/**\n * @return {?}\n */\ngetMenus(): Observable<Menu[]> {\n    return Observable.of(this.menus);\n  }\n/**\n * @param {?} menuId\n * @return {?}\n */\nmenuExists(menuId: string): boolean {\n    this.menus.map(menu => {\n      if (menu.id === menuId) {\n        return true;\n      }\n    });\n    return false;\n  }\n/**\n * @param {?} menuId\n * @return {?}\n */\nvalidateMenuExistence(menuId: string): Menu {\n    let /** @type {?} */ response = null;\n    if (menuId && menuId.length) {\n      this.menus.map(menu => {\n        if (menu.id === menuId) {\n          response = menu;\n        }\n      });\n    }\n    if (response === null) {\n      throw new Error('Menu does not exist: ' + menuId);\n    } else {\n      return response;\n    }\n  }\n/**\n * @param {?} menuId\n * @return {?}\n */\ngetMenu(menuId: string): Menu {\n    // Validate that the menu exists and return it\n    return this.validateMenuExistence(menuId);\n  };\n/**\n * @param {?} menu\n * @return {?}\n */\naddMenu(menu: IMenu) {\n    if (this.menuExists(menu.id)) {\n      throw new Error ('Menu already exists with this id: ' + menu.id);\n    } else {\n      const /** @type {?} */ index = this.menus.push(menu);\n      return this.menus[index - 1];\n    }\n  };\n/**\n * @param {?} menuId\n * @return {?}\n */\nremoveMenu(menuId: string): boolean {\n    // Validate that the menu exists\n    const /** @type {?} */ index = this.menus.findIndex(x => x.id === menuId);\n    if (index > -1) {\n      this.menus.splice(index, 1);\n      return true;\n    } else {\n      return false;\n    }\n  }\n/**\n * @param {?} menu\n * @return {?}\n */\nshouldRender(menu: IMenu): boolean {\n    if (this.user !== null) {\n      if (menu.roles.indexOf('*') > -1) {\n        return true;\n      } else {\n        for (const /** @type {?} */ userRoleIndex of this.user.roles) {\n          for (const /** @type {?} */ roleIndex of menu.roles) {\n            if (menu.roles[ /** @type {?} */((<any>roleIndex))] === this.user.roles[ /** @type {?} */((<any>userRoleIndex))]) {\n              return true;\n            }\n          }\n        }\n      }\n    } else {\n      return menu.isPublic;\n    }\n    return false;\n  }\n/**\n * @param {?} security\n */\nconstructor(security: SecurityService) {\n    this.user = security.user;\n    this.menus = [];\n    const mainMenu = new Menu({\n      id: 'mainMenu',\n      text: 'Menu'});\n    this.menus.push(mainMenu);\n  }\n\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: SecurityService, },\n];\n}\n\nfunction MenuService_tsickle_Closure_declarations() {\n/** @type {?} */\nMenuService.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nMenuService.ctorParameters;\n/** @type {?} */\nMenuService.prototype.menus;\n/** @type {?} */\nMenuService.prototype.user;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}